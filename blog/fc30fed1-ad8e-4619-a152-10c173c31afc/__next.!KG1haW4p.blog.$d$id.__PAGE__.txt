1:"$Sreact.fragment"
6d:I[897367,["/_next/static/chunks/d96012bcfc98706a.js","/_next/static/chunks/d80b3790a119a285.js"],"OutletBoundary"]
6e:"$Sreact.suspense"
:HL["/_next/static/chunks/b9ef641e76e3a351.css","style"]
0:{"buildId":"WIyHQZYl97jZnaEVwjsEh","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"max-w-[1440px] w-full mx-auto px-6 py-12","children":["$","article",null,{"className":"prose","children":[["$","p","p-0",{"children":"맨날 로그인 구현할 때마다 예전 레포지토리 뒤지고 다니는게 볼품없어 보인다."}],"\n",["$","p","p-1",{"children":"아예 여기다가 정리하려 한다."}],"\n",["$","p","p-2",{"children":"(참고로, 빌드 툴은 Gradle 기준으로 설명한다.)"}],"\n",["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":["\n",["$","p","p-0",{"children":[["$","code","code-0",{"children":"build.gradle"}],"에 의존성 라이브러리를 작성한다."]}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-groovy","children":"implementation 'org.springframework.boot:spring-boot-starter-security'\ntestImplementation 'org.springframework.security:spring-security-test'\n"}]}],"\n"]}],"\n",["$","li","li-1",{"children":["\n",["$","p","p-0",{"children":"Spring에서의 인증은 다음 순서로 이루어진다."}],"\n",["$","ol","ol-0",{"children":["\n",["$","li","li-0",{"children":["\n",["$","p","p-0",{"children":["$","code","code-0",{"children":"AuthenticationProvider"}]}],"\n"]}],"\n",["$","li","li-1",{"children":["\n",["$","p","p-0",{"children":["$","code","code-0",{"children":"UserDetailsService"}]}],"\n"]}],"\n",["$","li","li-2",{"children":["\n",["$","p","p-0",{"children":["$","code","code-0",{"children":"Authentication[Success|Failure]Handler"}]}],"\n"]}],"\n"]}],"\n",["$","p","p-1",{"children":["먼저 회원의 인증 정보를 담는 클래스를 ",["$","code","code-0",{"children":"UserDetails"}],"를 ",["$","code","code-1",{"children":"implements"}],"하여 생성한다."]}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," lombok.*;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.GrantedAuthority;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.authority.SimpleGrantedAuthority;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.userdetails.UserDetails;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.stereotype.Component;\n\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," java.util.ArrayList;\n",["$","span","span-6",{"className":"hljs-keyword","children":"import"}]," java.util.Collection;\n",["$","span","span-7",{"className":"hljs-keyword","children":"import"}]," java.util.List;\n\n",["$","span","span-8",{"className":"hljs-meta","children":"@Component"}],"\n",["$","span","span-9",{"className":"hljs-meta","children":"@Data"}],"\n",["$","span","span-10",{"className":"hljs-meta","children":"@With"}],"\n",["$","span","span-11",{"className":"hljs-meta","children":"@Builder"}],"\n",["$","span","span-12",{"className":"hljs-meta","children":"@AllArgsConstructor"}],"\n",["$","span","span-13",{"className":"hljs-meta","children":"@NoArgsConstructor"}],"\n",["$","span","span-14",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-15",{"className":"hljs-keyword","children":"class"}]," ",["$","span","span-16",{"className":"hljs-title class_","children":"CustomUserDetails"}]," ",["$","span","span-17",{"className":"hljs-keyword","children":"implements"}]," ",["$","span","span-18",{"className":"hljs-title class_","children":"UserDetails"}]," {\n    ",["$","span","span-19",{"className":"hljs-keyword","children":"private"}]," String username;\n    ",["$","span","span-20",{"className":"hljs-keyword","children":"private"}]," String password;\n\n    ",["$","span","span-21",{"className":"hljs-meta","children":"@Builder"}],".Default\n    ",["$","span","span-22",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-23",{"className":"hljs-type","children":"String"}]," ",["$","span","span-24",{"className":"hljs-variable","children":"authority"}]," ",["$","span","span-25",{"className":"hljs-operator","children":"="}]," ",["$","span","span-26",{"className":"hljs-string","children":"\"USER\""}],";\n\n    ",["$","span","span-27",{"className":"hljs-meta","children":"@Builder"}],".Default\n    ",["$","span","span-28",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-29",{"className":"hljs-type","children":"boolean"}]," ","$L2"," ","$L3"," ","$L4",";\n\n    ","$L5","\n    ","$L6"," Collection<? ","$L7"," ","$L8","> getAuthorities() {\n        List<GrantedAuthority> authorities = ","$L9"," ","$La","<>();\n        authorities.add(","$Lb"," ","$Lc","(","$Ld",".authority));\n        ","$Le"," authorities;\n    }\n\n    ","$Lf","\n    ","$L10"," ","$L11"," ","$L12","$L13"," {\n        ","$L14"," ","$L15",";\n    }\n\n    ","$L16","\n    ","$L17"," ","$L18"," ","$L19","$L1a"," {\n        ","$L1b"," !","$L1c",".locked;\n    }\n\n    ","$L1d","\n    ","$L1e"," ","$L1f"," ","$L20","$L21"," {\n        ","$L22"," ","$L23",";\n    }\n\n    ","$L24","\n    ","$L25"," ","$L26"," ","$L27","$L28"," {\n        ","$L29"," !","$L2a",".locked;\n    }\n}\n"]}]}],"\n"]}],"\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30","\n"]}]]}]}],["$L31"],"$L32"]}],"loading":null,"isPartial":false}
2:["$","span","span-30",{"className":"hljs-variable","children":"locked"}]
3:["$","span","span-31",{"className":"hljs-operator","children":"="}]
4:["$","span","span-32",{"className":"hljs-literal","children":"false"}]
5:["$","span","span-33",{"className":"hljs-meta","children":"@Override"}]
6:["$","span","span-34",{"className":"hljs-keyword","children":"public"}]
7:["$","span","span-35",{"className":"hljs-keyword","children":"extends"}]
8:["$","span","span-36",{"className":"hljs-title class_","children":"GrantedAuthority"}]
9:["$","span","span-37",{"className":"hljs-keyword","children":"new"}]
a:["$","span","span-38",{"className":"hljs-title class_","children":"ArrayList"}]
b:["$","span","span-39",{"className":"hljs-keyword","children":"new"}]
c:["$","span","span-40",{"className":"hljs-title class_","children":"SimpleGrantedAuthority"}]
d:["$","span","span-41",{"className":"hljs-built_in","children":"this"}]
e:["$","span","span-42",{"className":"hljs-keyword","children":"return"}]
f:["$","span","span-43",{"className":"hljs-meta","children":"@Override"}]
10:["$","span","span-44",{"className":"hljs-keyword","children":"public"}]
11:["$","span","span-45",{"className":"hljs-type","children":"boolean"}]
12:["$","span","span-46",{"className":"hljs-title function_","children":"isAccountNonExpired"}]
13:["$","span","span-47",{"className":"hljs-params","children":"()"}]
14:["$","span","span-48",{"className":"hljs-keyword","children":"return"}]
15:["$","span","span-49",{"className":"hljs-literal","children":"true"}]
16:["$","span","span-50",{"className":"hljs-meta","children":"@Override"}]
17:["$","span","span-51",{"className":"hljs-keyword","children":"public"}]
18:["$","span","span-52",{"className":"hljs-type","children":"boolean"}]
19:["$","span","span-53",{"className":"hljs-title function_","children":"isAccountNonLocked"}]
1a:["$","span","span-54",{"className":"hljs-params","children":"()"}]
1b:["$","span","span-55",{"className":"hljs-keyword","children":"return"}]
1c:["$","span","span-56",{"className":"hljs-built_in","children":"this"}]
1d:["$","span","span-57",{"className":"hljs-meta","children":"@Override"}]
1e:["$","span","span-58",{"className":"hljs-keyword","children":"public"}]
1f:["$","span","span-59",{"className":"hljs-type","children":"boolean"}]
20:["$","span","span-60",{"className":"hljs-title function_","children":"isCredentialsNonExpired"}]
21:["$","span","span-61",{"className":"hljs-params","children":"()"}]
22:["$","span","span-62",{"className":"hljs-keyword","children":"return"}]
23:["$","span","span-63",{"className":"hljs-literal","children":"true"}]
24:["$","span","span-64",{"className":"hljs-meta","children":"@Override"}]
25:["$","span","span-65",{"className":"hljs-keyword","children":"public"}]
26:["$","span","span-66",{"className":"hljs-type","children":"boolean"}]
27:["$","span","span-67",{"className":"hljs-title function_","children":"isEnabled"}]
28:["$","span","span-68",{"className":"hljs-params","children":"()"}]
29:["$","span","span-69",{"className":"hljs-keyword","children":"return"}]
2a:["$","span","span-70",{"className":"hljs-built_in","children":"this"}]
2b:["$","li","li-2",{"children":["\n",["$","p","p-0",{"children":"아이디를 통해 회원정보를 조회하는 Repository를 생성한다."}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," org.springframework.data.jpa.repository.JpaRepository;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," org.springframework.data.jpa.repository.Modifying;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.data.jpa.repository.Query;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.data.repository.query.Param;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.stereotype.Repository;\n\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," java.util.List;\n\n",["$","span","span-6",{"className":"hljs-meta","children":"@Repository"}],"\n",["$","span","span-7",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-8",{"className":"hljs-keyword","children":"interface"}]," ",["$","span","span-9",{"className":"hljs-title class_","children":"MemberRepository"}]," ",["$","span","span-10",{"className":"hljs-keyword","children":"extends"}]," ",["$","span","span-11",{"className":"hljs-title class_","children":"JpaRepository"}],"<Member, String> {\n    CustomUserDetails ",["$","span","span-12",{"className":"hljs-title function_","children":"findByUsername"}],["$","span","span-13",{"className":"hljs-params","children":["(",["$","span","span-0",{"className":"hljs-keyword","children":"final"}]," String username)"]}],";\n}\n"]}]}],"\n"]}]
2c:["$","li","li-3",{"children":["\n",["$","p","p-0",{"children":[["$","code","code-0",{"children":"UserDetailsService"}],"를 ",["$","code","code-1",{"children":"implements"}],"하는 클래스를 생성하여 회원정보 존재 여부를 리턴하는 메소드를 정의한다."]}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," lombok.RequiredArgsConstructor;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," lombok.extern.slf4j.Slf4j;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.userdetails.UserDetails;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.userdetails.UserDetailsService;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.userdetails.UsernameNotFoundException;\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," org.springframework.stereotype.Component;\n\n",["$","span","span-6",{"className":"hljs-meta","children":"@Component"}],"\n",["$","span","span-7",{"className":"hljs-meta","children":"@Slf4j"}],"\n",["$","span","span-8",{"className":"hljs-meta","children":"@RequiredArgsConstructor"}],"\n",["$","span","span-9",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-10",{"className":"hljs-keyword","children":"class"}]," ",["$","span","span-11",{"className":"hljs-title class_","children":"CustomUserDetailsService"}]," ",["$","span","span-12",{"className":"hljs-keyword","children":"implements"}]," ",["$","span","span-13",{"className":"hljs-title class_","children":"UserDetailsService"}]," {\n    ",["$","span","span-14",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-15",{"className":"hljs-keyword","children":"final"}]," MemberRepository memberRepository;\n\n    ",["$","span","span-16",{"className":"hljs-meta","children":"@Override"}],"\n    ",["$","span","span-17",{"className":"hljs-keyword","children":"public"}]," CustomUserDetails ",["$","span","span-18",{"className":"hljs-title function_","children":"loadUserByUsername"}],["$","span","span-19",{"className":"hljs-params","children":["(",["$","span","span-0",{"className":"hljs-keyword","children":"final"}]," String username)"]}]," ",["$","span","span-20",{"className":"hljs-keyword","children":"throws"}]," UsernameNotFoundException {\n        ",["$","span","span-21",{"className":"hljs-type","children":"CustomUserDetails"}]," ",["$","span","span-22",{"className":"hljs-variable","children":"user"}]," ",["$","span","span-23",{"className":"hljs-operator","children":"="}]," ",["$","span","span-24",{"className":"hljs-built_in","children":"this"}],".memberRepository.findByUsername(username);\n        ",["$","span","span-25",{"className":"hljs-keyword","children":"if"}]," (user == ",["$","span","span-26",{"className":"hljs-literal","children":"null"}],") ",["$","span","span-27",{"className":"hljs-keyword","children":"throw"}]," ",["$","span","span-28",{"className":"hljs-keyword","children":"new"}]," ",["$","span","span-29",{"className":"hljs-title class_","children":"UsernameNotFoundException"}],"(username);\n        ",["$","span","span-30",{"className":"hljs-keyword","children":"return"}]," user;\n    }\n}\n"]}]}],"\n"]}]
2d:["$","li","li-4",{"children":["\n",["$","p","p-0",{"children":[["$","code","code-0",{"children":"AuthenticationProvider"}],"를 상속받는 클래스를 생성하고, 본격적인 인증 로직을 구현한다."]}],"\n",["$","p","p-1",{"children":"(클라이언트에서 보낸 패스워드는 이미 암호화되어 왔다고 가정한다.)"}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," lombok.RequiredArgsConstructor;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," lombok.extern.slf4j.Slf4j;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.authentication.*;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.Authentication;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.AuthenticationException;\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.userdetails.UserDetails;\n",["$","span","span-6",{"className":"hljs-keyword","children":"import"}]," org.springframework.stereotype.Component;\n\n",["$","span","span-7",{"className":"hljs-meta","children":"@Component"}],"\n",["$","span","span-8",{"className":"hljs-meta","children":"@Slf4j"}],"\n",["$","span","span-9",{"className":"hljs-meta","children":"@RequiredArgsConstructor"}],"\n",["$","span","span-10",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-11",{"className":"hljs-keyword","children":"class"}]," ",["$","span","span-12",{"className":"hljs-title class_","children":"CustomAuthenticationProvider"}]," ",["$","span","span-13",{"className":"hljs-keyword","children":"implements"}]," ",["$","span","span-14",{"className":"hljs-title class_","children":"AuthenticationProvider"}]," {\n    ",["$","span","span-15",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-16",{"className":"hljs-keyword","children":"final"}]," CustomUserDetailsService customUserDetailsService;\n\n    ",["$","span","span-17",{"className":"hljs-meta","children":"@Override"}],"\n    ",["$","span","span-18",{"className":"hljs-keyword","children":"public"}]," Authentication ",["$","span","span-19",{"className":"hljs-title function_","children":"authenticate"}],["$","span","span-20",{"className":"hljs-params","children":"(Authentication authentication)"}]," ",["$","span","span-21",{"className":"hljs-keyword","children":"throws"}]," AuthenticationException {\n        ",["$","span","span-22",{"className":"hljs-keyword","children":"final"}]," ",["$","span","span-23",{"className":"hljs-type","children":"String"}]," ",["$","span","span-24",{"className":"hljs-variable","children":"username"}]," ",["$","span","span-25",{"className":"hljs-operator","children":"="}]," (String) authentication.getPrincipal();\n        ",["$","span","span-26",{"className":"hljs-keyword","children":"final"}]," ",["$","span","span-27",{"className":"hljs-type","children":"String"}]," ",["$","span","span-28",{"className":"hljs-variable","children":"password"}]," ",["$","span","span-29",{"className":"hljs-operator","children":"="}]," (String) authentication.getCredentials();\n        ",["$","span","span-30",{"className":"hljs-keyword","children":"final"}]," ",["$","span","span-31",{"className":"hljs-type","children":"CustomUserDetails"}]," ",["$","span","span-32",{"className":"hljs-variable","children":"user"}]," ",["$","span","span-33",{"className":"hljs-operator","children":"="}]," ",["$","span","span-34",{"className":"hljs-built_in","children":"this"}],".customUserDetailsService.loadUserByUsername(username);\n\n        ",["$","span","span-35",{"className":"hljs-comment","children":"// if not matched username or password"}],"\n        ",["$","span","span-36",{"className":"hljs-keyword","children":"if"}]," (password != user.getPassword())\n            ",["$","span","span-37",{"className":"hljs-keyword","children":"throw"}]," ",["$","span","span-38",{"className":"hljs-keyword","children":"new"}]," ",["$","span","span-39",{"className":"hljs-title class_","children":"BadCredentialsException"}],"(username);\n        ","$L33","\n        ","$L34"," ","$L35"," (!user.isCredentialsNonExpired())\n            ","$L36"," ","$L37"," ","$L38","(username);\n        ","$L39","\n        ","$L3a"," ","$L3b"," (!user.isEnabled())\n            ","$L3c"," ","$L3d"," ","$L3e","(username);\n        ","$L3f","\n        ","$L40"," ","$L41"," (!user.isAccountNonExpired())\n            ","$L42"," ","$L43"," ","$L44","(username);\n        ","$L45","\n        ","$L46"," ","$L47"," (!user.isAccountNonExpired())\n            ","$L48"," ","$L49"," ","$L4a","(username);\n\n        ","$L4b"," ","$L4c"," ","$L4d","(username, password, user.getAuthorities());\n    }\n\n    ","$L4e","\n    ","$L4f"," ","$L50"," ","$L51","$L52"," {\n        ","$L53"," ","$L54",";\n    }\n}\n"]}]}],"\n"]}]
2e:["$","li","li-5",{"children":["\n",["$","p","p-0",{"children":["인증 결과에 해당하는 클래스를 ",["$","code","code-0",{"children":"AuthenticationSuccessHandler"}],", ",["$","code","code-1",{"children":"AuthenticationFailureHandler"}],"를 상속받아 생성한다."]}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," lombok.RequiredArgsConstructor;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," lombok.extern.slf4j.Slf4j;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.Authentication;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.web.authentication.AuthenticationSuccessHandler;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.stereotype.Component;\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," org.springframework.transaction.annotation.Transactional;\n\n",["$","span","span-6",{"className":"hljs-keyword","children":"import"}]," javax.servlet.ServletException;\n",["$","span","span-7",{"className":"hljs-keyword","children":"import"}]," javax.servlet.http.HttpServletRequest;\n",["$","span","span-8",{"className":"hljs-keyword","children":"import"}]," javax.servlet.http.HttpServletResponse;\n",["$","span","span-9",{"className":"hljs-keyword","children":"import"}]," java.io.IOException;\n\n",["$","span","span-10",{"className":"hljs-meta","children":"@Component"}],"\n",["$","span","span-11",{"className":"hljs-meta","children":"@Slf4j"}],"\n",["$","span","span-12",{"className":"hljs-meta","children":"@RequiredArgsConstructor"}],"\n",["$","span","span-13",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-14",{"className":"hljs-keyword","children":"class"}]," ",["$","span","span-15",{"className":"hljs-title class_","children":"LoginSuccessHandler"}]," ",["$","span","span-16",{"className":"hljs-keyword","children":"implements"}]," ",["$","span","span-17",{"className":"hljs-title class_","children":"AuthenticationSuccessHandler"}]," {\n    ",["$","span","span-18",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-19",{"className":"hljs-keyword","children":"final"}]," MemberRepository memberRepository;\n\n    ",["$","span","span-20",{"className":"hljs-meta","children":"@Transactional"}],"\n    ",["$","span","span-21",{"className":"hljs-meta","children":"@Override"}],"\n    ",["$","span","span-22",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-23",{"className":"hljs-keyword","children":"void"}]," ",["$","span","span-24",{"className":"hljs-title function_","children":"onAuthenticationSuccess"}],["$","span","span-25",{"className":"hljs-params","children":"(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            Authentication authentication)"}]," ",["$","span","span-26",{"className":"hljs-keyword","children":"throws"}]," IOException, ServletException {\n        ",["$","span","span-27",{"className":"hljs-comment","children":"/**\n         * TODO 인증 성공 후 로직\n         * */"}],"\n    }\n}\n"]}]}],"\n",["$","pre","pre-1",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," lombok.RequiredArgsConstructor;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," lombok.extern.slf4j.Slf4j;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.authentication.*;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.stereotype.Component;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.transaction.annotation.Transactional;\n\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," javax.servlet.ServletException;\n",["$","span","span-6",{"className":"hljs-keyword","children":"import"}]," javax.servlet.http.HttpServletRequest;\n","$L55"," javax.servlet.http.HttpServletResponse;\n","$L56"," java.io.IOException;\n\n","$L57","\n","$L58","\n","$L59","\n","$L5a"," ","$L5b"," ","$L5c"," ","$L5d"," ","$L5e"," {\n    ","$L5f"," ","$L60"," MemberRepository memberRepository;\n\n    ","$L61","\n    ","$L62","\n    ","$L63"," ","$L64"," ","$L65","$L66"," ","$L67"," IOException, ServletException {\n        ","$L68","\n    }\n}\n"]}]}],"\n"]}]
2f:["$","li","li-6",{"children":["\n",["$","p","p-0",{"children":["로그아웃 후의 로직 구현을 위해 ",["$","code","code-0",{"children":"LogoutSuccessHandler"}],"를 ",["$","code","code-1",{"children":"implements"}],"하여 클래스를 생성한다."]}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," lombok.RequiredArgsConstructor;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," lombok.extern.slf4j.Slf4j;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.core.Authentication;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.web.authentication.logout.LogoutSuccessHandler;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.stereotype.Component;\n\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," javax.servlet.ServletException;\n",["$","span","span-6",{"className":"hljs-keyword","children":"import"}]," javax.servlet.http.HttpServletRequest;\n",["$","span","span-7",{"className":"hljs-keyword","children":"import"}]," javax.servlet.http.HttpServletResponse;\n",["$","span","span-8",{"className":"hljs-keyword","children":"import"}]," java.io.IOException;\n\n",["$","span","span-9",{"className":"hljs-meta","children":"@Component"}],"\n",["$","span","span-10",{"className":"hljs-meta","children":"@Slf4j"}],"\n",["$","span","span-11",{"className":"hljs-meta","children":"@RequiredArgsConstructor"}],"\n",["$","span","span-12",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-13",{"className":"hljs-keyword","children":"class"}]," ",["$","span","span-14",{"className":"hljs-title class_","children":"CustomLogoutSuccessHandler"}]," ",["$","span","span-15",{"className":"hljs-keyword","children":"implements"}]," ",["$","span","span-16",{"className":"hljs-title class_","children":"LogoutSuccessHandler"}]," {\n    ",["$","span","span-17",{"className":"hljs-meta","children":"@Override"}],"\n    ",["$","span","span-18",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-19",{"className":"hljs-keyword","children":"void"}]," ",["$","span","span-20",{"className":"hljs-title function_","children":"onLogoutSuccess"}],["$","span","span-21",{"className":"hljs-params","children":"(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            Authentication authentication)"}]," ",["$","span","span-22",{"className":"hljs-keyword","children":"throws"}]," IOException, ServletException {\n        ",["$","span","span-23",{"className":"hljs-comment","children":"/**\n         * TODO 로그아웃 후 로직\n         * */"}],"\n    }\n}\n"]}]}],"\n"]}]
30:["$","li","li-7",{"children":["\n",["$","p","p-0",{"children":"Spring Security에 대한 config 클래스를 생성한다."}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-java","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," lombok.RequiredArgsConstructor;\n",["$","span","span-1",{"className":"hljs-keyword","children":"import"}]," org.springframework.context.annotation.Configuration;\n",["$","span","span-2",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.config.annotation.web.builders.HttpSecurity;\n",["$","span","span-3",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\n",["$","span","span-4",{"className":"hljs-keyword","children":"import"}]," org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\n",["$","span","span-5",{"className":"hljs-meta","children":"@Configuration"}],"\n",["$","span","span-6",{"className":"hljs-meta","children":"@EnableWebSecurity"}],"\n",["$","span","span-7",{"className":"hljs-meta","children":"@RequiredArgsConstructor"}],"\n",["$","span","span-8",{"className":"hljs-keyword","children":"public"}]," ",["$","span","span-9",{"className":"hljs-keyword","children":"class"}]," ",["$","span","span-10",{"className":"hljs-title class_","children":"WebSecurityConfig"}]," ",["$","span","span-11",{"className":"hljs-keyword","children":"extends"}]," ",["$","span","span-12",{"className":"hljs-title class_","children":"WebSecurityConfigurerAdapter"}]," {\n    ",["$","span","span-13",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-14",{"className":"hljs-keyword","children":"final"}]," CustomAuthenticationProvider customAuthenticationProvider;\n    ",["$","span","span-15",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-16",{"className":"hljs-keyword","children":"final"}]," CustomUserDetailsService customUserDetailsService;\n    ",["$","span","span-17",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-18",{"className":"hljs-keyword","children":"final"}]," LoginSuccessHandler loginSuccessHandler;\n    ",["$","span","span-19",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-20",{"className":"hljs-keyword","children":"final"}]," LoginFailureHandler loginFailureHandler;\n    ",["$","span","span-21",{"className":"hljs-keyword","children":"private"}]," ",["$","span","span-22",{"className":"hljs-keyword","children":"final"}]," CustomLogoutSuccessHandler customLogoutSuccessHandler;\n\n    ",["$","span","span-23",{"className":"hljs-meta","children":"@Override"}],"\n    ",["$","span","span-24",{"className":"hljs-keyword","children":"protected"}]," ",["$","span","span-25",{"className":"hljs-keyword","children":"void"}]," ",["$","span","span-26",{"className":"hljs-title function_","children":"configure"}],["$","span","span-27",{"className":"hljs-params","children":"(HttpSecurity http)"}]," ",["$","span","span-28",{"className":"hljs-keyword","children":"throws"}]," Exception {\n        http.csrf().disable();\n\n        http.authorizeRequests()\n                .antMatchers(",["$","span","span-29",{"className":"hljs-string","children":"\"*\""}],")\n                .permitAll();\n\n        http.authenticationProvider(",["$","span","span-30",{"className":"hljs-built_in","children":"this"}],".customAuthenticationProvider);\n        http.userDetailsService(",["$","span","span-31",{"className":"hljs-built_in","children":"this"}],".customUserDetailsService);\n\n        http.formLogin()\n                .loginProcessingUrl(",["$","span","span-32",{"className":"hljs-string","children":"\"/api/member/login\""}],")\n                .loginPage(",["$","span","span-33",{"className":"hljs-string","children":"\"/\""}],")\n                .successHandler(",["$","span","span-34",{"className":"hljs-built_in","children":"this"}],".loginSuccessHandler)\n                .failureHandler(","$L69",".loginFailureHandler)\n                .permitAll();\n\n        http.logout()\n                .logoutUrl(","$L6a",")\n                .logoutSuccessHandler(","$L6b",".customLogoutSuccessHandler)\n                .invalidateHttpSession(","$L6c",");\n    }\n}\n"]}]}],"\n"]}]
31:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/b9ef641e76e3a351.css","precedence":"next"}]
32:["$","$L6d",null,{"children":["$","$6e",null,{"name":"Next.MetadataOutlet","children":"$@6f"}]}]
33:["$","span","span-40",{"className":"hljs-comment","children":"// if expired credential"}]
34:["$","span","span-41",{"className":"hljs-keyword","children":"else"}]
35:["$","span","span-42",{"className":"hljs-keyword","children":"if"}]
36:["$","span","span-43",{"className":"hljs-keyword","children":"throw"}]
37:["$","span","span-44",{"className":"hljs-keyword","children":"new"}]
38:["$","span","span-45",{"className":"hljs-title class_","children":"CredentialsExpiredException"}]
39:["$","span","span-46",{"className":"hljs-comment","children":"// if disabled account"}]
3a:["$","span","span-47",{"className":"hljs-keyword","children":"else"}]
3b:["$","span","span-48",{"className":"hljs-keyword","children":"if"}]
3c:["$","span","span-49",{"className":"hljs-keyword","children":"throw"}]
3d:["$","span","span-50",{"className":"hljs-keyword","children":"new"}]
3e:["$","span","span-51",{"className":"hljs-title class_","children":"DisabledException"}]
3f:["$","span","span-52",{"className":"hljs-comment","children":"// if expired account"}]
40:["$","span","span-53",{"className":"hljs-keyword","children":"else"}]
41:["$","span","span-54",{"className":"hljs-keyword","children":"if"}]
42:["$","span","span-55",{"className":"hljs-keyword","children":"throw"}]
43:["$","span","span-56",{"className":"hljs-keyword","children":"new"}]
44:["$","span","span-57",{"className":"hljs-title class_","children":"AccountExpiredException"}]
45:["$","span","span-58",{"className":"hljs-comment","children":"// if locked account"}]
46:["$","span","span-59",{"className":"hljs-keyword","children":"else"}]
47:["$","span","span-60",{"className":"hljs-keyword","children":"if"}]
48:["$","span","span-61",{"className":"hljs-keyword","children":"throw"}]
49:["$","span","span-62",{"className":"hljs-keyword","children":"new"}]
4a:["$","span","span-63",{"className":"hljs-title class_","children":"LockedException"}]
4b:["$","span","span-64",{"className":"hljs-keyword","children":"return"}]
4c:["$","span","span-65",{"className":"hljs-keyword","children":"new"}]
4d:["$","span","span-66",{"className":"hljs-title class_","children":"UsernamePasswordAuthenticationToken"}]
4e:["$","span","span-67",{"className":"hljs-meta","children":"@Override"}]
4f:["$","span","span-68",{"className":"hljs-keyword","children":"public"}]
50:["$","span","span-69",{"className":"hljs-type","children":"boolean"}]
51:["$","span","span-70",{"className":"hljs-title function_","children":"supports"}]
52:["$","span","span-71",{"className":"hljs-params","children":"(Class<?> authentication)"}]
53:["$","span","span-72",{"className":"hljs-keyword","children":"return"}]
54:["$","span","span-73",{"className":"hljs-literal","children":"true"}]
55:["$","span","span-7",{"className":"hljs-keyword","children":"import"}]
56:["$","span","span-8",{"className":"hljs-keyword","children":"import"}]
57:["$","span","span-9",{"className":"hljs-meta","children":"@Component"}]
58:["$","span","span-10",{"className":"hljs-meta","children":"@Slf4j"}]
59:["$","span","span-11",{"className":"hljs-meta","children":"@RequiredArgsConstructor"}]
5a:["$","span","span-12",{"className":"hljs-keyword","children":"public"}]
5b:["$","span","span-13",{"className":"hljs-keyword","children":"class"}]
5c:["$","span","span-14",{"className":"hljs-title class_","children":"LoginFailureHandler"}]
5d:["$","span","span-15",{"className":"hljs-keyword","children":"implements"}]
5e:["$","span","span-16",{"className":"hljs-title class_","children":"AuthenticationFailureHandler"}]
5f:["$","span","span-17",{"className":"hljs-keyword","children":"private"}]
60:["$","span","span-18",{"className":"hljs-keyword","children":"final"}]
61:["$","span","span-19",{"className":"hljs-meta","children":"@Transactional"}]
62:["$","span","span-20",{"className":"hljs-meta","children":"@Override"}]
63:["$","span","span-21",{"className":"hljs-keyword","children":"public"}]
64:["$","span","span-22",{"className":"hljs-keyword","children":"void"}]
65:["$","span","span-23",{"className":"hljs-title function_","children":"onAuthenticationFailure"}]
66:["$","span","span-24",{"className":"hljs-params","children":"(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            AuthenticationException exception)"}]
67:["$","span","span-25",{"className":"hljs-keyword","children":"throws"}]
68:["$","span","span-26",{"className":"hljs-comment","children":"/**\n         * TODO 인증 실패 후 로직\n         * */"}]
69:["$","span","span-35",{"className":"hljs-built_in","children":"this"}]
6a:["$","span","span-36",{"className":"hljs-string","children":"\"/api/member/logout\""}]
6b:["$","span","span-37",{"className":"hljs-built_in","children":"this"}]
6c:["$","span","span-38",{"className":"hljs-literal","children":"true"}]
6f:null
