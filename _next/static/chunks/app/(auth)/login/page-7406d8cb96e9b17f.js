(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{64204:function(e,t,n){"use strict";var i=n(83114);t.Z=void 0,function(e,t){if((t||!e||!e.__esModule)&&null!==e&&("object"==typeof e||"function"==typeof e)){var n=o(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=r?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(i,a,c):i[a]=e[a]}i.default=e,n&&n.set(e,i)}}(n(15017));var r=i(n(47707)),a=n(50209);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var c=(0,r.default)((0,a.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");t.Z=c},84742:function(e,t,n){"use strict";var i=n(83114);t.Z=void 0,function(e,t){if((t||!e||!e.__esModule)&&null!==e&&("object"==typeof e||"function"==typeof e)){var n=o(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=r?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(i,a,c):i[a]=e[a]}i.default=e,n&&n.set(e,i)}}(n(15017));var r=i(n(47707)),a=n(50209);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var c=(0,r.default)((0,a.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");t.Z=c},62878:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var i=n(27230),r=n(64652),a=n(15017),o=n(98370),c=n(94120),l=n(19541),u=n(97821),s=n(59192),d=n(63960),p=n(61932),f=n(35275);function h(e){return(0,f.Z)("MuiTypography",e)}(0,p.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var g=n(50209);let m=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],v=e=>{let{align:t,gutterBottom:n,noWrap:i,paragraph:r,variant:a,classes:o}=e,c={root:["root",a,"inherit"!==e.align&&`align${(0,d.Z)(t)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return(0,l.Z)(c,h,o)},y=(0,u.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${(0,d.Z)(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>(0,r.Z)({margin:0},"inherit"===t.variant&&{font:"inherit"},"inherit"!==t.variant&&e.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),k={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},b={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},w=e=>b[e]||e,x=a.forwardRef(function(e,t){let n=(0,s.Z)({props:e,name:"MuiTypography"}),a=w(n.color),l=(0,c.Z)((0,r.Z)({},n,{color:a})),{align:u="inherit",className:d,component:p,gutterBottom:f=!1,noWrap:h=!1,paragraph:b=!1,variant:x="body1",variantMapping:Z=k}=l,j=(0,i.Z)(l,m),O=(0,r.Z)({},l,{align:u,color:a,className:d,component:p,gutterBottom:f,noWrap:h,paragraph:b,variant:x,variantMapping:Z}),S=p||(b?"p":Z[x]||k[x])||"span",I=v(O);return(0,g.jsx)(y,(0,r.Z)({as:S,ref:t,ownerState:O,className:(0,o.Z)(I.root,d)},j))});var Z=x},95116:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SignIn"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"signIn"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isLogged"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:89}};t.loc.source={body:"mutation SignIn($email: String!) {\n  signIn(email: $email) {\n    email\n    isLogged\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}t.definitions.forEach(function(e){if(e.name){var t=new Set;(function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})})(e,t),n[e.name.value]=t}}),e.exports=t,e.exports.SignIn=function(e,t){var r={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=n[t]||new Set,o=new Set,c=new Set;for(a.forEach(function(e){c.add(e)});c.size>0;){var l=c;c=new Set,l.forEach(function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach(function(e){c.add(e)}))})}return o.forEach(function(t){var n=i(e,t);n&&r.definitions.push(n)}),r}(t,"SignIn")},31834:function(e,t,n){Promise.resolve().then(n.bind(n,83816))},83816:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var i,r,a=n(50209),o=n(15017),c=n(15912),l=n(62878),u=n(97821),s=n(55185),d=n(88235),p=n(2541),f=n(35299),h=n.n(f),g=n(70044),m=n(20217),v=n(73409);(i=r||(r={})).Unauthorization="UNAUTHORIZATION",i.InvalidToken="INVALID_TOKEN",i.NotAdministrator="NOT_ADMINISTRATOR",i.AuthorizationExpired="AUTHORIZATION_EXPIRED";let y={[r.Unauthorization]:"토큰이 필요합니다.",[r.InvalidToken]:"토큰이 올바른 형식이 아닙니다.",[r.NotAdministrator]:"관리자가 아닙니다.",[r.AuthorizationExpired]:"토큰이 만료되었습니다."};var k=n(26423),b=n(95116),w=n.n(b),x=n(64581),Z=n(91522),j=n(64204),O=n(84742),S=n(48928);let I=[{key:"github",icon:j.Z,label:"Github 로그인",buttonProps:{backgroundColor:p.Z["900"],textColor:"white"}},{key:"google",icon:O.Z,label:"Google 로그인",buttonProps:{backgroundColor:S.Z["700"],textColor:"white"}}];function N(){let e=(0,c.useRouter)(),{authService:t}=(0,x.Z)(),{openAlert:n}=(0,k.useAlert)(),i=(0,Z.q)(e=>e.setLoading),{mutate:u,isPending:s}=(0,g.D)({mutationKey:["signIn"],mutationFn:e=>(0,v.ZP)("https://jayur830-github-io-server-nestjs.fly.dev/api/graphql",w(),h()(e,"email"),h()(e,"authorization")),onSuccess(t){let n=t.signIn.isLogged;n&&e.push("/admin")},onError(e){let i=Object.keys(y).find(t=>e.message.includes(t));i&&(n({open:!0,autoHideDuration:7e3,message:y[i]}),i===r.NotAdministrator&&(0,m.h8)(t.currentUser))}}),d=(0,o.useCallback)(async e=>{switch(e){case"github":{let e=new m.GH;try{let{user:n}=await (0,m.rh)(t,e);await u({email:n.email||"",authorization:"Bearer ".concat(await n.getIdToken())})}catch(n){if("auth/account-exists-with-different-credential"===n.code)try{let{user:n}=await (0,m.k9)(t.currentUser,e);await u({email:n.email||"",authorization:"Bearer ".concat(await n.getIdToken())})}catch(e){console.log(e)}}break}case"google":{let e=new m.hJ;try{let{user:n}=await (0,m.rh)(t,e);await u({email:n.email||"",authorization:"Bearer ".concat(await n.getIdToken())})}catch(n){if("auth/account-exists-with-different-credential"===n.code)try{let{user:n}=await (0,m.k9)(t.currentUser,e);await u({email:n.email||"",authorization:"Bearer ".concat(await n.getIdToken())})}catch(e){console.log(e)}}}}},[u,t]);return(0,o.useEffect)(()=>{i(s)},[i,s]),(0,a.jsx)(P,{children:(0,a.jsx)(A,{children:I.map(e=>{let{key:t,icon:n,buttonProps:i,label:r}=e;return(0,a.jsxs)(D,{"background-color":i.backgroundColor,"text-color":i.textColor,onClick:()=>d(t),children:[(0,a.jsx)(n,{}),(0,a.jsx)(l.Z,{fontWeight:700,fontSize:16,width:"100%",children:r})]},t)})})})}let P=(0,u.ZP)(s.ZP)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",padding:20}),A=(0,u.ZP)(s.ZP)(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",gap:16,maxWidth:400,width:"100%",border:"1.5px solid ".concat(p.Z["400"]),borderRadius:20,padding:36,[t.breakpoints.down("sm")]:{gap:14,borderRadius:10,padding:20}}}),D=(0,u.ZP)(d.Z)(e=>{let{theme:t,...n}=e;return{justifyContent:"flex-start",gap:14,fontSize:24,backgroundColor:n["background-color"],color:n["text-color"],width:"100%",padding:"16px 24px",transition:"opacity 0.2s",":hover":{backgroundColor:n["background-color"],opacity:.5},[t.breakpoints.down("sm")]:{padding:"10px 14px",":hover":{opacity:1}}}})},26423:function(e,t,n){"use strict";n.r(t),n.d(t,{useAlert:function(){return h}});var i=n(50209),r=n(15017),a=n(25372),o=n(65289),c=n(98565),l=n(73957),u=n(35299),s=n.n(u),d=n(76459);let{Provider:p,useContext:f}=(0,a.createProvider)(function(){var e,t,n,a;let[l,u]=(0,r.useState)(null),s=(0,r.useCallback)(e=>{u(e)},[]),d=(0,r.useCallback)((e,t)=>{"clickaway"!==t&&u(e=>({...e,open:!1}))},[]);return{snackbarProps:{...l,anchorOrigin:{vertical:null!==(n=null==l?void 0:null===(e=l.anchorOrigin)||void 0===e?void 0:e.vertical)&&void 0!==n?n:"top",horizontal:null!==(a=null==l?void 0:null===(t=l.anchorOrigin)||void 0===t?void 0:t.horizontal)&&void 0!==a?a:"center"},action:(0,i.jsxs)(i.Fragment,{children:[null==l?void 0:l.action,(0,i.jsx)(c.Z,{color:"inherit",onClick:d,children:(0,i.jsx)(o.Z,{})})]}),onClose:d},openAlert:s}});function h(){return s()(f(),"openAlert")}t.default=(0,d.b)(p,function(e){let{children:t}=e,n=f("snackbarProps");return(0,i.jsxs)(i.Fragment,{children:[t,(0,i.jsx)(l.Z,{...n})]})})},64581:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(78889),r=n(20217);n(53110);let a={apiKey:"AIzaSyB2FFrhWmR3vbh83AAo45_9jyNkipXKRbM",authDomain:"jayur830-81c71.firebaseapp.com",projectId:"jayur830-81c71",storageBucket:"jayur830-81c71.appspot.com",messagingSenderId:"474003620889",appId:"1:474003620889:web:233c4ad0d47d0ec99dd688",measurementId:"G-R54QHPGYJX"},o=(0,i.ZF)(a);function c(){let e=(0,i.C6)().length?(0,i.Mq)():(0,i.ZF)(a);return{authService:(0,r.v0)(e)}}(0,r.v0)(o)},91522:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var i=n(76459);let r=(0,i.e)(e=>({isDarkMode:!1,setDarkMode(){e(e=>({isDarkMode:!e.isDarkMode}))},loading:!1,setLoading(t){e(()=>({loading:t}))}}))},76459:function(e,t,n){"use strict";n.d(t,{e:function(){return a},b:function(){return c}});var i=n(69163),r=n(36417);function a(e){return(0,i.Ue)((0,r.n)(e))}var o=n(15017),c=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduceRight((t,n)=>(0,o.createElement)(n,e,t),e.children)}},15912:function(e,t,n){e.exports=n(29593)}},function(e){e.O(0,[775,220,140,894,308,654,79,3,224,913,437,744],function(){return e(e.s=31834)}),_N_E=e.O()}]);