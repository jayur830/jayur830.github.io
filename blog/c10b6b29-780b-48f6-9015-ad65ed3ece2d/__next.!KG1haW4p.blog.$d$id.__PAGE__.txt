1:"$Sreact.fragment"
6e:I[897367,["/_next/static/chunks/d96012bcfc98706a.js","/_next/static/chunks/d80b3790a119a285.js"],"OutletBoundary"]
6f:"$Sreact.suspense"
:HL["/_next/static/chunks/b9ef641e76e3a351.css","style"]
0:{"buildId":"WIyHQZYl97jZnaEVwjsEh","rsc":["$","$1","c",{"children":[["$","div",null,{"className":"max-w-[1440px] w-full mx-auto px-6 py-12","children":["$","article",null,{"className":"prose","children":[["$","p","p-0",{"children":"드디어 React Native에도 ECharts 라이브러리가 등장했다."}],"\n",["$","p","p-1",{"children":"그동안 회사 프로젝트에서 Victory Native를 쓰면서 성능 문제로 느리다는 고객 문의가 많았었는데"}],"\n",["$","p","p-2",{"children":"이번 기회로 어느 정도 개선할 수 있지 않을까 하여 접하게 되었다."}],"\n",["$","p","p-3",{"children":"그래서 프로젝트에 이미 Victory로 구현된 차트를 새롭게 React Native ECharts로 만들어보면서"}],"\n",["$","p","p-4",{"children":"겪은 과정과 문제들을 기록하기 위해 이 글을 쓴다."}],"\n",["$","hr","hr-0",{}],"\n",["$","h2","h2-0",{"children":"Install"}],"\n",["$","p","p-5",{"children":"먼저 패키지 설치부터 한다."}],"\n",["$","pre","pre-0",{"children":["$","code","code-0",{"className":"hljs language-bash","children":["npm i @wuba/react-native-echarts echarts react-native-svg @shopify/react-native-skia      ",["$","span","span-0",{"className":"hljs-comment","children":"# npm"}],"\nyarn add @wuba/react-native-echarts echarts react-native-svg @shopify/react-native-skia   ",["$","span","span-1",{"className":"hljs-comment","children":"# yarn"}],"\npnpm add @wuba/react-native-echarts echarts react-native-svg @shopify/react-native-skia   ",["$","span","span-2",{"className":"hljs-comment","children":"# pnpm"}],"\n"]}]}],"\n",["$","p","p-6",{"children":["Android의 경우 ",["$","code","code-0",{"children":"android/app/proguard-rules.pro"}]," 파일에 다음을 추가한다."]}],"\n",["$","pre","pre-1",{"children":["$","code","code-0",{"className":"hljs language-plain","children":"-keep class com.shopify.reactnative.skia.** { *; }\n"}]}],"\n",["$","p","p-7",{"children":["iOS의 경우 ",["$","code","code-0",{"children":"pod install"}]," 을 해줘야 한다."]}],"\n",["$","pre","pre-2",{"children":["$","code","code-0",{"className":"hljs language-bash","children":[["$","span","span-0",{"className":"hljs-built_in","children":"cd"}]," ios\npod install\n"]}]}],"\n",["$","p","p-8",{"children":"네이티브 라이브러리가 추가/변경되었으니 나중에 배포 시에는 당연히 마켓 심사를 거쳐야 한다."}],"\n",["$","hr","hr-1",{}],"\n",["$","h2","h2-1",{"children":"Usage"}],"\n",["$","p","p-9",{"children":"사용은 다음과 같이 하면 된다."}],"\n",["$","p","p-10",{"children":"기존의 ECharts option을 그대로 쓸 수 있다."}],"\n",["$","pre","pre-3",{"children":["$","code","code-0",{"className":"hljs language-typescript","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," { ",["$","span","span-1",{"className":"hljs-title class_","children":"SkiaChart"}],", ",["$","span","span-2",{"className":"hljs-title class_","children":"SVGRenderer"}]," } ",["$","span","span-3",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-4",{"className":"hljs-string","children":"'@wuba/react-native-echarts'"}],";\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," { ",["$","span","span-6",{"className":"hljs-title class_","children":"LineChart"}]," } ",["$","span","span-7",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-8",{"className":"hljs-string","children":"'echarts/charts'"}],";\n",["$","span","span-9",{"className":"hljs-keyword","children":"import"}]," { ",["$","span","span-10",{"className":"hljs-title class_","children":"GridComponent"}]," } ",["$","span","span-11",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-12",{"className":"hljs-string","children":"'echarts/components'"}],";\n",["$","span","span-13",{"className":"hljs-keyword","children":"import"}]," * ",["$","span","span-14",{"className":"hljs-keyword","children":"as"}]," echarts ",["$","span","span-15",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-16",{"className":"hljs-string","children":"'echarts/core'"}],";\n",["$","span","span-17",{"className":"hljs-keyword","children":"import"}]," { ",["$","span","span-18",{"className":"hljs-title class_","children":"EChartsOption"}]," } ",["$","span","span-19",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-20",{"className":"hljs-string","children":"'echarts/types/dist/shared'"}],";\n",["$","span","span-21",{"className":"hljs-keyword","children":"import"}]," { useEffect, useRef } ",["$","span","span-22",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-23",{"className":"hljs-string","children":"'react'"}],";\n\necharts.","$L2","([","$L3",", ","$L4",", ","$L5","]);\n\n","$L6"," ","$L7"," ","$L8"," ","$L9","(","$La",") {\n  ","$Lb"," skiaRef = useRef<","$Lc",">(","$Ld",");\n\n  ","$Le"," ","$Lf",": ","$L10"," = {\n    ","$L11",": {\n\t    ","$L12",": ","$L13",",\n\t    ","$L14",": [","$L15",", ","$L16",", ","$L17",", ","$L18",", ","$L19",", ","$L1a",", ","$L1b","]\n\t  },\n\t  ","$L1c",": {\n\t    ","$L1d",": ","$L1e","\n\t  },\n\t\t","$L1f",": [\n\t    {\n\t      ","$L20",": [","$L21",", ","$L22",", ","$L23",", ","$L24",", ","$L25",", ","$L26",", ","$L27","],\n\t      ","$L28",": ","$L29","\n\t    },\n\t\t],\n  };\n\n  ","$L2a","(","$L2b"," {\n    ","$L2c"," (skiaRef.","$L2d",") {\n      ","$L2e"," chart = echarts.","$L2f","(skiaRef.","$L30",", ","$L31",", {\n        ","$L32",": ","$L33",",\n        ","$L34",": ","$L35",",\n        ","$L36",": ","$L37",",\n      });\n      chart.","$L38","(option);\n\t    ","$L39"," ","$L3a"," chart.","$L3b","();\n    }\n  }, [width, height, option]);\n\n  ","$L3c"," ","$L3d",";\n}\n"]}]}],"\n","$L3e","\n","$L3f","\n","$L40","\n","$L41","\n","$L42","\n","$L43","\n","$L44","\n","$L45","\n","$L46","\n","$L47","\n","$L48","\n","$L49","\n","$L4a","\n","$L4b","\n","$L4c","\n","$L4d","\n","$L4e","\n","$L4f","\n","$L50","\n","$L51","\n","$L52","\n","$L53","\n","$L54","\n","$L55","\n","$L56","\n","$L57","\n","$L58","\n","$L59","\n","$L5a","\n","$L5b","\n","$L5c","\n","$L5d","\n","$L5e","\n","$L5f","\n","$L60","\n","$L61","\n","$L62","\n","$L63","\n","$L64","\n","$L65","\n","$L66","\n","$L67","\n","$L68","\n","$L69","\n","$L6a","\n","$L6b"]}]}],["$L6c"],"$L6d"]}],"loading":null,"isPartial":false}
2:["$","span","span-24",{"className":"hljs-title function_","children":"use"}]
3:["$","span","span-25",{"className":"hljs-title class_","children":"SVGRenderer"}]
4:["$","span","span-26",{"className":"hljs-title class_","children":"LineChart"}]
5:["$","span","span-27",{"className":"hljs-title class_","children":"GridComponent"}]
6:["$","span","span-28",{"className":"hljs-keyword","children":"export"}]
7:["$","span","span-29",{"className":"hljs-keyword","children":"default"}]
8:["$","span","span-30",{"className":"hljs-keyword","children":"function"}]
9:["$","span","span-31",{"className":"hljs-title function_","children":"App"}]
a:["$","span","span-32",{"className":"hljs-params"}]
b:["$","span","span-33",{"className":"hljs-keyword","children":"const"}]
c:["$","span","span-34",{"className":"hljs-built_in","children":"any"}]
d:["$","span","span-35",{"className":"hljs-literal","children":"null"}]
e:["$","span","span-36",{"className":"hljs-keyword","children":"const"}]
f:["$","span","span-37",{"className":"hljs-attr","children":"option"}]
10:["$","span","span-38",{"className":"hljs-title class_","children":"EChartsOption"}]
11:["$","span","span-39",{"className":"hljs-attr","children":"xAxis"}]
12:["$","span","span-40",{"className":"hljs-attr","children":"type"}]
13:["$","span","span-41",{"className":"hljs-string","children":"'category'"}]
14:["$","span","span-42",{"className":"hljs-attr","children":"data"}]
15:["$","span","span-43",{"className":"hljs-string","children":"'Mon'"}]
16:["$","span","span-44",{"className":"hljs-string","children":"'Tue'"}]
17:["$","span","span-45",{"className":"hljs-string","children":"'Wed'"}]
18:["$","span","span-46",{"className":"hljs-string","children":"'Thu'"}]
19:["$","span","span-47",{"className":"hljs-string","children":"'Fri'"}]
1a:["$","span","span-48",{"className":"hljs-string","children":"'Sat'"}]
1b:["$","span","span-49",{"className":"hljs-string","children":"'Sun'"}]
1c:["$","span","span-50",{"className":"hljs-attr","children":"yAxis"}]
1d:["$","span","span-51",{"className":"hljs-attr","children":"type"}]
1e:["$","span","span-52",{"className":"hljs-string","children":"'value'"}]
1f:["$","span","span-53",{"className":"hljs-attr","children":"series"}]
20:["$","span","span-54",{"className":"hljs-attr","children":"data"}]
21:["$","span","span-55",{"className":"hljs-number","children":"15"}]
22:["$","span","span-56",{"className":"hljs-number","children":"23"}]
23:["$","span","span-57",{"className":"hljs-number","children":"22"}]
24:["$","span","span-58",{"className":"hljs-number","children":"21"}]
25:["$","span","span-59",{"className":"hljs-number","children":"13"}]
26:["$","span","span-60",{"className":"hljs-number","children":"14"}]
27:["$","span","span-61",{"className":"hljs-number","children":"26"}]
28:["$","span","span-62",{"className":"hljs-attr","children":"type"}]
29:["$","span","span-63",{"className":"hljs-string","children":"'line'"}]
2a:["$","span","span-64",{"className":"hljs-title function_","children":"useEffect"}]
2b:["$","span","span-65",{"className":"hljs-function","children":"() =>"}]
2c:["$","span","span-66",{"className":"hljs-keyword","children":"if"}]
2d:["$","span","span-67",{"className":"hljs-property","children":"current"}]
2e:["$","span","span-68",{"className":"hljs-keyword","children":"const"}]
2f:["$","span","span-69",{"className":"hljs-title function_","children":"init"}]
30:["$","span","span-70",{"className":"hljs-property","children":"current"}]
31:["$","span","span-71",{"className":"hljs-string","children":"'light'"}]
32:["$","span","span-72",{"className":"hljs-attr","children":"renderer"}]
33:["$","span","span-73",{"className":"hljs-string","children":"'svg'"}]
34:["$","span","span-74",{"className":"hljs-attr","children":"width"}]
35:["$","span","span-75",{"className":"hljs-number","children":"600"}]
36:["$","span","span-76",{"className":"hljs-attr","children":"height"}]
37:["$","span","span-77",{"className":"hljs-number","children":"400"}]
38:["$","span","span-78",{"className":"hljs-title function_","children":"setOption"}]
39:["$","span","span-79",{"className":"hljs-keyword","children":"return"}]
3a:["$","span","span-80",{"className":"hljs-function","children":"() =>"}]
3b:["$","span","span-81",{"className":"hljs-title function_","children":"dispose"}]
3c:["$","span","span-82",{"className":"hljs-keyword","children":"return"}]
3d:["$","span","span-83",{"className":"xml","children":["$","span","span-0",{"className":"hljs-tag","children":["<",["$","span","span-0",{"className":"hljs-name","children":"SkiaChart"}]," ",["$","span","span-1",{"className":"hljs-attr","children":"ref"}],"=",["$","span","span-2",{"className":"hljs-string","children":"{skiaRef}"}]," />"]}]}]
3e:["$","p","p-11",{"children":"ECharts를 쓰던 사람은 알겠지만 option의 series에 여러가지 차트를 추가할 수 있다."}]
3f:["$","p","p-12",{"children":"근데 그냥 하면 안되고 다음과 같이 내가 추가하려는 차트의 종류에 해당하는 컴포넌트를"}]
40:["$","p","p-13",{"children":"포함시켜줘야 한다."}]
41:["$","pre","pre-4",{"children":["$","code","code-0",{"className":"hljs language-typescript","children":[["$","span","span-0",{"className":"hljs-keyword","children":"import"}]," { ",["$","span","span-1",{"className":"hljs-title class_","children":"SkiaChart"}],", ",["$","span","span-2",{"className":"hljs-title class_","children":"SVGRenderer"}]," } ",["$","span","span-3",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-4",{"className":"hljs-string","children":"'@wuba/react-native-echarts'"}],";\n",["$","span","span-5",{"className":"hljs-keyword","children":"import"}]," { ",["$","span","span-6",{"className":"hljs-title class_","children":"BarChart"}],", ",["$","span","span-7",{"className":"hljs-title class_","children":"LineChart"}],", ",["$","span","span-8",{"className":"hljs-title class_","children":"ScatterChart"}],", ... } ",["$","span","span-9",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-10",{"className":"hljs-string","children":"'echarts/charts'"}],";\n",["$","span","span-11",{"className":"hljs-keyword","children":"import"}]," { ",["$","span","span-12",{"className":"hljs-title class_","children":"GridComponent"}]," } ",["$","span","span-13",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-14",{"className":"hljs-string","children":"'echarts/components'"}],";\n",["$","span","span-15",{"className":"hljs-keyword","children":"import"}]," * ",["$","span","span-16",{"className":"hljs-keyword","children":"as"}]," echarts ",["$","span","span-17",{"className":"hljs-keyword","children":"from"}]," ",["$","span","span-18",{"className":"hljs-string","children":"'echarts/core'"}],";\n\necharts.",["$","span","span-19",{"className":"hljs-title function_","children":"use"}],"([\n\t",["$","span","span-20",{"className":"hljs-title class_","children":"SVGRenderer"}],",\n\t",["$","span","span-21",{"className":"hljs-title class_","children":"LineChart"}],",\n\t",["$","span","span-22",{"className":"hljs-title class_","children":"GridComponent"}],",\n\t",["$","span","span-23",{"className":"hljs-title class_","children":"BarChart"}],",\n\t",["$","span","span-24",{"className":"hljs-title class_","children":"ScatterChart"}],",\n\t...\n]);\n"]}]}]
42:["$","hr","hr-2",{}]
43:["$","h2","h2-2",{"children":"Problems"}]
44:["$","p","p-14",{"children":"역시나 문제를 마주쳤다."}]
45:["$","p","p-15",{"children":["우선, ",["$","code","code-0",{"children":"SkiaChart"}]," 에서 ",["$","code","code-1",{"children":"fontFamily"}]," 가 적용이 안된다."]}]
46:["$","p","p-16",{"children":"툴팁, 축 레이블 등 어느 곳에 적용해봐도 먹히지가 않는다."}]
47:["$","p","p-17",{"children":"찾아봤더니 아직 지원 안한다고 한다. (Well-known Issue)"}]
48:["$","p","p-18",{"children":"그리고 iOS에서는 한글이 깨진다…"}]
49:["$","p","p-19",{"children":["locale 설정이 필요한건지 해서 검색해봤더니 ",["$","code","code-0",{"children":"SvgChart"}]," 를 쓰라고들 한다."]}]
4a:["$","p","p-20",{"children":[["$","del","del-0",{"children":"그리고 툴팁의"}]," ",["$","del","del-1",{"children":["$","code","code-0",{"children":"backgroundColor"}]}]," ",["$","del","del-2",{"children":"의 alpha 값으로 투명도를 주면"}]]}]
4b:["$","p","p-21",{"children":[["$","del","del-0",{"children":["$","code","code-0",{"children":"SkiaChart"}]}]," ",["$","del","del-1",{"children":"에서 적용이 안된다."}]]}]
4c:["$","p","p-22",{"children":[["$","code","code-0",{"children":"rgba"}]," css 함수로 하면 적용됨 (해결)"]}]
4d:["$","p","p-23",{"children":[["$","code","code-0",{"children":"series.markLine.symbol"}]," 에다가 base64 이미지 문자열을 적용하면"]}]
4e:["$","p","p-24",{"children":["마찬가지로 ",["$","code","code-0",{"children":"SkiaChart"}]," 에서 안되더라."]}]
4f:["$","p","p-25",{"children":"이것도 아직 지원 안된다고 한다. (Well-known Issue)"}]
50:["$","p","p-26",{"children":"이 문제들이 과연 이슈일지, 아니면 내가 원인이 되어 나타난 문제인지는 좀 더 파악을 해봐야겠다."}]
51:["$","hr","hr-3",{}]
52:["$","h2","h2-3",{"children":"Compare"}]
53:["$","p","p-27",{"children":["이 라이브러리에서는 ",["$","code","code-0",{"children":"SkiaChart"}]," 와 ",["$","code","code-1",{"children":"SvgChart"}]," 두 가지를 제공한다."]}]
54:["$","p","p-28",{"children":[["$","code","code-0",{"children":"SkiaChart"}]," 는 Shopify라는 곳에서 오픈소스로 만든 고성능 그래픽 라이브러리 Skia 기반의 차트이다."]}]
55:["$","p","p-29",{"children":"Skia 관련해서는 여기를 참고하면 좋을 듯 하다."}]
56:["$","p","p-30",{"children":["$","a","a-0",{"href":"https://shopify.engineering/react-native-skia-2022","children":"bookmark"}]}]
57:["$","p","p-31",{"children":[["$","code","code-0",{"children":"SvgChart"}]," 는 react-native-svg 라이브러리 기반의 차트이다."]}]
58:["$","p","p-32",{"children":"두 차트 컴포넌트의 차이점은 성능이다."}]
59:["$","p","p-33",{"children":[["$","code","code-0",{"children":"SkiaChart"}]," 는 내부적으로 Skia DOM API를 사용하여 JS Thread 외부에서 UI를 그린다고 한다."]}]
5a:["$","p","p-34",{"children":["하지만 ",["$","code","code-0",{"children":"SvgChart"}]," 는 기존의 React Native 렌더링 방식으로 UI가 렌더링된다."]}]
5b:["$","p","p-35",{"children":"UI Thread에서 UI를 그리다가 JS 연산이 필요할 경우"}]
5c:["$","p","p-36",{"children":"JS Thread에서 할일 다 끝내고 다시 UI Thread에 올 때까지 UI가 다 그려지는 시간이 지연된다."}]
5d:["$","p","p-37",{"children":["직접 차트를 구현해보니 당연히 ",["$","code","code-0",{"children":"SkiaChart"}]," 렌더링이 빠르고 깔끔했고,"]}]
5e:["$","p","p-38",{"children":[["$","code","code-0",{"children":"SvgChart"}]," 는 기존에 사용하던 Victory Native로 구현한 차트에서 발생했던 Freezing 현상이 똑같이 나타났다."]}]
5f:["$","p","p-39",{"children":"(근데 체감상 Victory 차트에서 나타났던 Freezing 시간보다는 조금 덜한 느낌)"}]
60:["$","hr","hr-4",{}]
61:["$","h2","h2-4",{"children":"Conclusion"}]
62:["$","p","p-40",{"children":"사실상 위에서 언급한 문제들만 해결될 수 있다면"}]
63:["$","p","p-41",{"children":"더할 나위 없이 훌륭한 라이브러리라고 할 수 있다."}]
64:["$","p","p-42",{"children":"성능도 성능이지만, 기존의 ECharts 기능을 그대로 써서 차트를 구현할 수 있다는 게"}]
65:["$","p","p-43",{"children":"나에게는 너무 큰 혁명이었다. (그동안 너무 열악해서)"}]
66:["$","hr","hr-5",{}]
67:["$","h2","h2-5",{"children":"References"}]
68:["$","p","p-44",{"children":["$","a","a-0",{"href":"https://shopify.github.io/react-native-skia/","children":"bookmark"}]}]
69:["$","p","p-45",{"children":["$","a","a-0",{"href":"https://shopify.github.io/react-native-skia/","children":"bookmark"}]}]
6a:["$","p","p-46",{"children":["$","a","a-0",{"href":"https://github.com/wuba/react-native-echarts/issues/16","children":"link_preview"}]}]
6b:["$","p","p-47",{"children":["$","a","a-0",{"href":"https://echarts.apache.org/examples/en/index.html#chart-type-line","children":"bookmark"}]}]
6c:["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/b9ef641e76e3a351.css","precedence":"next"}]
6d:["$","$L6e",null,{"children":["$","$6f",null,{"name":"Next.MetadataOutlet","children":"$@70"}]}]
70:null
